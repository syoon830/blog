[{"_path":"/posts/38527f39-69f6-4663-ba58-351831ed48b4","_dir":"posts","_draft":false,"_partial":false,"_locale":"","title":"nuxt3 $fetch","description":"nuxt3ì—ì„œëŠ” $fetchëŠ” ofetchë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤. (ofetchëŠ” node, browser í™˜ê²½ ë‘êµ°ë°ì„œ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.)","tags":["nuxt","axios"],"date":"2024-01-22T00:00:00.000Z","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"nuxt3ì—ì„œëŠ” $fetchëŠ” ofetchë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤. (ofetchëŠ” node, browser í™˜ê²½ ë‘êµ°ë°ì„œ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ê·¸ë˜ì„œ ê¸°ì¡´ axiosë¡œ ì„¤ì •ëœ ì½”ë“œë“¤ì„ ëœ¯ì–´ ê³ ì³¤ë‹¤."}]},{"type":"element","tag":"pre","props":{"className":["language-javascript"],"code":"// ê¸°ì¡´\nimport axios from 'axios';\nimport type { AxiosInstance } from 'axios';\nimport {useAuthStore} from \"~/store/auth\";\n\nexport default defineNuxtPlugin(nuxtApp => {\n    const config = useRuntimeConfig().public;\n    const clientId = config.clientId;\n    const clientServer = config.clientServer;\n    const btoaClientInfo = btoa(`${clientId}:${clientServer}`);\n\n    const authStore = useAuthStore();\n    const axiosInstance: AxiosInstance = axios.create({\n        baseURL: config.BASE_URL,\n    });\n\n    axiosInstance.interceptors.request.use((config) => {\n        if (authStore.isAuthenticated) {\n            config.headers.Authorization = `Bearer ${authStore.token}`;\n        } else {\n            config.headers.Authorization = `Basic ${btoaClientInfo}`;\n        }\n        return config;\n    });\n\n    nuxtApp.provide('axios', axiosInstance);\n});\n\n// ìˆ˜ì •\nimport { useAuthStore } from \"~/store/auth\";\n\nexport default defineNuxtPlugin(nuxtApp => {\n    const config = useRuntimeConfig().public;\n    const clientId = config.clientId;\n    const clientServer = config.clientServer;\n    const btoaClientInfo = btoa(`${clientId}:${clientServer}`);\n\n    const apiFetch = $fetch.create({\n        baseURL: config.BASE_URL,\n        onRequest({ options }) {\n            const authStore = useAuthStore();\n            if (authStore.isAuthenticated) {\n                options.headers = {\n                    Authorization: `Bearer ${authStore.token}`\n                };\n            } else {\n                options.headers = {\n                    Authorization: `Basic ${btoaClientInfo}`\n                };\n            }\n        }\n    })\n    \n    nuxtApp.provide('apiFetch', apiFetch);\n});\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// ê¸°ì¡´\nimport axios from 'axios';\nimport type { AxiosInstance } from 'axios';\nimport {useAuthStore} from \"~/store/auth\";\n\nexport default defineNuxtPlugin(nuxtApp => {\n    const config = useRuntimeConfig().public;\n    const clientId = config.clientId;\n    const clientServer = config.clientServer;\n    const btoaClientInfo = btoa(`${clientId}:${clientServer}`);\n\n    const authStore = useAuthStore();\n    const axiosInstance: AxiosInstance = axios.create({\n        baseURL: config.BASE_URL,\n    });\n\n    axiosInstance.interceptors.request.use((config) => {\n        if (authStore.isAuthenticated) {\n            config.headers.Authorization = `Bearer ${authStore.token}`;\n        } else {\n            config.headers.Authorization = `Basic ${btoaClientInfo}`;\n        }\n        return config;\n    });\n\n    nuxtApp.provide('axios', axiosInstance);\n});\n\n// ìˆ˜ì •\nimport { useAuthStore } from \"~/store/auth\";\n\nexport default defineNuxtPlugin(nuxtApp => {\n    const config = useRuntimeConfig().public;\n    const clientId = config.clientId;\n    const clientServer = config.clientServer;\n    const btoaClientInfo = btoa(`${clientId}:${clientServer}`);\n\n    const apiFetch = $fetch.create({\n        baseURL: config.BASE_URL,\n        onRequest({ options }) {\n            const authStore = useAuthStore();\n            if (authStore.isAuthenticated) {\n                options.headers = {\n                    Authorization: `Bearer ${authStore.token}`\n                };\n            } else {\n                options.headers = {\n                    Authorization: `Basic ${btoaClientInfo}`\n                };\n            }\n        }\n    })\n    \n    nuxtApp.provide('apiFetch', apiFetch);\n});\n"}]}]},{"type":"element","tag":"h2","props":{"id":"ì°¸ê³ "},"children":[{"type":"text","value":"ì°¸ê³ "}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://jongmin4943.tistory.com/entry/Nuxt3-fetch-useAsyncData-useFetch-%EC%9D%98-%EC%B0%A8%EC%9D%B4","rel":["nofollow"]},"children":[{"type":"text","value":"https://jongmin4943.tistory.com/entry/Nuxt3-fetch-useAsyncData-useFetch-ì˜-ì°¨ì´"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"ì°¸ê³ ","depth":2,"text":"ì°¸ê³ "}]}},"_type":"markdown","_id":"content:posts:38527f39-69f6-4663-ba58-351831ed48b4.md","_source":"content","_file":"posts/38527f39-69f6-4663-ba58-351831ed48b4.md","_extension":"md"},{"_path":"/posts/e9a8a610-ff29-4403-bbb0-55a5438aad7c","_dir":"posts","_draft":false,"_partial":false,"_locale":"","title":"formData ì „ì†¡ ë°©ë²•","description":"axiosë¥¼ $fetchë¡œ ë³€ê²½í•˜ë©´ì„œ ë¡œê·¸ì¸ì‹œ ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ë‹¤.","tags":["axios","$fetch"],"date":"2024-01-18T00:00:00.000Z","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"axiosë¥¼ $fetchë¡œ ë³€ê²½í•˜ë©´ì„œ ë¡œê·¸ì¸ì‹œ ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ë‹¤."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ê¸°ì¡´ì— axiosë¥¼ ì‚¬ìš©í• ë•ŒëŠ” ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©ì¤‘ì´ê³ "}]},{"type":"element","tag":"pre","props":{"className":["language-javascript"],"code":"await axios.post(url, qs.stringfy(payload));\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"await axios.post(url, qs.stringfy(payload));\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ì „ë‹¬ëœ í˜•íƒœë¥¼ ë³´ë‹ˆ Form Dataë¡œ ì „ì†¡ì´ ë˜ê³  ìˆë‹¤."}]},{"type":"element","tag":"img","props":{"src":"https://prod-files-secure.s3.us-west-2.amazonaws.com/122c4317-821b-493a-85a2-3b119a538ecc/9dafbaca-364e-44e5-a781-a09ea600235f/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240122%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240122T081102Z&X-Amz-Expires=3600&X-Amz-Signature=55e60c1d56581e762fddc03051f2695acb9cc1c3de637c1c69d4367317a53867&X-Amz-SignedHeaders=host&x-id=GetObject"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"$fetchëŠ” ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©ì„ í–ˆëŠ”ë°"}]},{"type":"element","tag":"pre","props":{"className":["language-javascript"],"code":"await apiFetch(url, {\n    method: 'POST',\n    body: qs.stringfy(payload)\n});\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"await apiFetch(url, {\n    method: 'POST',\n    body: qs.stringfy(payload)\n});\n"}]}]},{"type":"element","tag":"img","props":{"src":"https://prod-files-secure.s3.us-west-2.amazonaws.com/122c4317-821b-493a-85a2-3b119a538ecc/4668e01f-3943-43c8-a597-0451918ee3ed/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240122%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240122T081102Z&X-Amz-Expires=3600&X-Amz-Signature=9e5849419f7e44fbb23a4e1cc2243df7de5345a18ac7d7a68473055edf85e31c&X-Amz-SignedHeaders=host&x-id=GetObject"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ì´ë ‡ê²Œ ì „ë‹¬ì´ ë¼ì„œ ë¡œê·¸ì¸ì´ ì•ˆë˜ëŠ”ê²ƒì´ë‹¤."}]},{"type":"element","tag":"h2","props":{"id":"_2ê°€ì§€-í•´ê²°ë²•"},"children":[{"type":"text","value":"2ê°€ì§€ í•´ê²°ë²•"}]},{"type":"element","tag":"h3","props":{"id":"_1-headerì—-content-type-applicationx-www-form-urlencoded-ë„£ì–´ì£¼ê¸°"},"children":[{"type":"text","value":"1. headerì— "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"'Content-Type': 'application/x-www-form-urlencoded'"}]},{"type":"text","value":"  ë„£ì–´ì£¼ê¸°"}]},{"type":"element","tag":"pre","props":{"className":["language-javascript"],"code":"$fetch(url, {\n    method: 'POST',\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n        },\n    body: qs.stringfy(payload)\n})\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"$fetch(url, {\n    method: 'POST',\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n        },\n    body: qs.stringfy(payload)\n})\n"}]}]},{"type":"element","tag":"h3","props":{"id":"_2-new-urlsearchparams-ì‚¬ìš©"},"children":[{"type":"text","value":"2. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"new URLSearchParams"}]},{"type":"text","value":" ì‚¬ìš©"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ì›ë˜ëŠ” new FormData ë§Œë“¤ì–´ì„œ ì¼ì¼íˆ append í•´ì¤˜ì•¼í•˜ëŠ”ë° ìœ„ í•¨ìˆ˜ë¡œ ê°„í¸í•˜ê²Œ ë§Œë“¤ì–´ì¤€ë‹¤."}]},{"type":"element","tag":"pre","props":{"className":["language-javascript"],"code":"$fetch(url, {\n    method: 'POST',\n    body: new URLSearchParams(qs.stringfy(payload))\n});\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"$fetch(url, {\n    method: 'POST',\n    body: new URLSearchParams(qs.stringfy(payload))\n});\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ë‚˜ëŠ” ê·¸ëƒ¥ 1ë²ˆìœ¼ë¡œ ì‚¬ìš©í•˜ì˜€ë‹¤."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Axiosë¥¼ ì‚¬ìš©í•  ë•Œ ë³„ë„ì˜ ì„¤ì •ì´ ì—†ìœ¼ë©´, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"qs.stringify"}]},{"type":"text","value":"ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³€í™˜ëœ ë°ì´í„°ëŠ” "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"application/x-www-form-urlencoded"}]},{"type":"text","value":" í˜•ì‹ìœ¼ë¡œ ì „ì†¡ëœë‹¤."}]}]},{"type":"element","tag":"h3","props":{"id":"ì°¸ê³ "},"children":[{"type":"text","value":"ì°¸ê³ "}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://inpa.tistory.com/entry/JS-%F0%9F%93%9A-FormData-%EC%A0%95%EB%A6%AC-fetch-api","rel":["nofollow"]},"children":[{"type":"text","value":"https://inpa.tistory.com/entry/JS-ğŸ“š-FormData-ì •ë¦¬-fetch-api"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"_2ê°€ì§€-í•´ê²°ë²•","depth":2,"text":"2ê°€ì§€ í•´ê²°ë²•","children":[{"id":"_1-headerì—-content-type-applicationx-www-form-urlencoded-ë„£ì–´ì£¼ê¸°","depth":3,"text":"1. headerì— 'Content-Type': 'application/x-www-form-urlencoded'  ë„£ì–´ì£¼ê¸°"},{"id":"_2-new-urlsearchparams-ì‚¬ìš©","depth":3,"text":"2. new URLSearchParams ì‚¬ìš©"},{"id":"ì°¸ê³ ","depth":3,"text":"ì°¸ê³ "}]}]}},"_type":"markdown","_id":"content:posts:e9a8a610-ff29-4403-bbb0-55a5438aad7c.md","_source":"content","_file":"posts/e9a8a610-ff29-4403-bbb0-55a5438aad7c.md","_extension":"md"}]