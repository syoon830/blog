[{"_path":"/posts/e9a8a610-ff29-4403-bbb0-55a5438aad7c","_dir":"posts","_draft":false,"_partial":false,"_locale":"","title":"formData 전송 방법","description":"axios를 $fetch로 변경하면서 로그인시 문제가 발생하였다.","tags":["axios","$fetch"],"date":"2024-01-18T00:00:00.000Z","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"axios를 $fetch로 변경하면서 로그인시 문제가 발생하였다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"기존에 axios를 사용할때는 아래와 같이 사용중이고"}]},{"type":"element","tag":"pre","props":{"className":["language-javascript"],"code":"await axios.post(url, qs.stringfy(payload));\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"await axios.post(url, qs.stringfy(payload));\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"전달된 형태를 보니 Form Data로 전송이 되고 있다."}]},{"type":"element","tag":"img","props":{"src":"/blog/images/89c917fe-52bd-4799-a32c-849e0183eb12.png"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"$fetch는 아래와 같이 사용을 했는데"}]},{"type":"element","tag":"pre","props":{"className":["language-javascript"],"code":"await apiFetch(url, {\n    method: 'POST',\n    body: qs.stringfy(payload)\n});\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"await apiFetch(url, {\n    method: 'POST',\n    body: qs.stringfy(payload)\n});\n"}]}]},{"type":"element","tag":"img","props":{"src":"/blog/images/1b374cbb-2952-4a61-9b76-2935a49789a4.png"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"이렇게 전달이 돼서 로그인이 안되는것이다."}]},{"type":"element","tag":"h2","props":{"id":"_2가지-해결법"},"children":[{"type":"text","value":"2가지 해결법"}]},{"type":"element","tag":"h3","props":{"id":"_1-header에-content-type-applicationx-www-form-urlencoded-넣어주기"},"children":[{"type":"text","value":"1. header에 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"'Content-Type': 'application/x-www-form-urlencoded'"}]},{"type":"text","value":"  넣어주기"}]},{"type":"element","tag":"pre","props":{"className":["language-javascript"],"code":"$fetch(url, {\n    method: 'POST',\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n        },\n    body: qs.stringfy(payload)\n})\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"$fetch(url, {\n    method: 'POST',\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n        },\n    body: qs.stringfy(payload)\n})\n"}]}]},{"type":"element","tag":"h3","props":{"id":"_2-new-urlsearchparams-사용"},"children":[{"type":"text","value":"2. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"new URLSearchParams"}]},{"type":"text","value":" 사용"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"원래는 new FormData 만들어서 일일히 append 해줘야하는데 위 함수로 간편하게 만들어준다."}]},{"type":"element","tag":"pre","props":{"className":["language-javascript"],"code":"$fetch(url, {\n    method: 'POST',\n    body: new URLSearchParams(qs.stringfy(payload))\n});\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"$fetch(url, {\n    method: 'POST',\n    body: new URLSearchParams(qs.stringfy(payload))\n});\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"나는 그냥 1번으로 사용하였다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Axios를 사용할 때 별도의 설정이 없으면, "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"qs.stringify"}]},{"type":"text","value":"를 사용하여 변환된 데이터는 "},{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"application/x-www-form-urlencoded"}]},{"type":"text","value":" 형식으로 전송된다."}]}]},{"type":"element","tag":"h3","props":{"id":"참고"},"children":[{"type":"text","value":"참고"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://inpa.tistory.com/entry/JS-%F0%9F%93%9A-FormData-%EC%A0%95%EB%A6%AC-fetch-api","rel":["nofollow"]},"children":[{"type":"text","value":"https://inpa.tistory.com/entry/JS-📚-FormData-정리-fetch-api"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"_2가지-해결법","depth":2,"text":"2가지 해결법","children":[{"id":"_1-header에-content-type-applicationx-www-form-urlencoded-넣어주기","depth":3,"text":"1. header에 'Content-Type': 'application/x-www-form-urlencoded'  넣어주기"},{"id":"_2-new-urlsearchparams-사용","depth":3,"text":"2. new URLSearchParams 사용"},{"id":"참고","depth":3,"text":"참고"}]}]}},"_type":"markdown","_id":"content:posts:e9a8a610-ff29-4403-bbb0-55a5438aad7c.md","_source":"content","_file":"posts/e9a8a610-ff29-4403-bbb0-55a5438aad7c.md","_extension":"md"}]